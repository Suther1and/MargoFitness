# üëü –ë–æ–Ω—É—Å–Ω–∞—è –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º—ã

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ —Å:
- **–ë–æ–Ω—É—Å–Ω–æ–π –≤–∞–ª—é—Ç–æ–π "–®–∞–≥–∏"** (1 —à–∞–≥ = 1‚ÇΩ)
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –∫–µ—à–±–µ–∫–æ–º** (3-10% –æ—Ç –ø–æ–∫—É–ø–æ–∫)
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π** (—Å—Å—ã–ª–∫–∏ + –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è)
- **–ü—Ä–æ–º–æ–∫–æ–¥–∞–º–∏** (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Supabase –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
psql -h your-db-host -U postgres -d postgres < database/migrations/013_ADD_BONUS_REFERRAL_SYSTEM.sql
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Supabase Dashboard:
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ SQL Editor
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `database/migrations/013_ADD_BONUS_REFERRAL_SYSTEM.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å

### 2. –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã TypeScript

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏, —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç–∏–ø—ã Supabase:

```bash
npx supabase gen types typescript --project-id your-project-id > types/supabase.ts
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
npm install @radix-ui/react-progress
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

1. **user_bonuses** - –ë–æ–Ω—É—Å–Ω—ã–µ —Å—á–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `balance` - —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å —à–∞–≥–æ–≤
   - `cashback_level` - —É—Ä–æ–≤–µ–Ω—å –∫–µ—à–±–µ–∫–∞ (1-4)
   - `lifetime_spent` - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–ø–ª–∞—á–µ–Ω–æ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è
   - `referral_level` - —É—Ä–æ–≤–µ–Ω—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

2. **bonus_transactions** - –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
   - `amount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ (+/-)
   - `type` - —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (welcome, cashback, referral_bonus, spent)

3. **referral_codes** - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã
   - `code` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ (8 —Å–∏–º–≤–æ–ª–æ–≤)
   - `user_id` - –≤–ª–∞–¥–µ–ª–µ—Ü –∫–æ–¥–∞

4. **referrals** - –°–≤—è–∑–∏ —Ä–µ—Ñ–µ—Ä–µ—Ä ‚Üí —Ä–µ—Ñ–µ—Ä–∞–ª
   - `referrer_id` - –∫—Ç–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª
   - `referred_id` - –∫–æ–≥–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª
   - `status` - —Å—Ç–∞—Ç—É—Å (registered, first_purchase_made)

5. **promo_codes** - –ü—Ä–æ–º–æ–∫–æ–¥—ã –æ—Ç –∞–¥–º–∏–Ω–∞
   - `code` - –∫–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞
   - `discount_type` - —Ç–∏–ø —Å–∫–∏–¥–∫–∏ (percent, fixed_amount)
   - `usage_limit` - –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

**–£—Ä–æ–≤–Ω–∏ –∫–µ—à–±–µ–∫–∞:**
- ü•â Bronze (0-9,998‚ÇΩ): 3%
- ü•à Silver (9,999-49,998‚ÇΩ): 5%
- ü•á Gold (49,999-99,998‚ÇΩ): 7%
- üíé Platinum (99,999‚ÇΩ+): 10%

**–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ:**
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å: 250 —à–∞–≥–æ–≤
- –ö–µ—à–±–µ–∫: –æ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–π —Å—É–º–º—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –¥–æ 30% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫–∏

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

**–î–ª—è –ø—Ä–∏–≥–ª–∞—à–∞—é—â–µ–≥–æ:**
- –†–∞–∑–æ–≤—ã–π –±–æ–Ω—É—Å: 500 —à–∞–≥–æ–≤ –∑–∞ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- –ü—Ä–æ—Ü–µ–Ω—Ç —Å –ø–æ–∫—É–ø–æ–∫: 3-10% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è)

**–£—Ä–æ–≤–Ω–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
- 0-99,999‚ÇΩ: 3%
- 100,000-249,999‚ÇΩ: 5%
- 250,000-499,999‚ÇΩ: 7%
- 500,000‚ÇΩ+: 10%

**–î–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ:**
- 250 —à–∞–≥–æ–≤ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–º–æ–∫–æ–¥—ã

- –°–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º–∏
- –¢–∏–ø—ã: –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å–∫–∏–¥–∫–∞ –∏–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞
- –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º
- –õ–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–∏–¥–æ–∫

–í—Å–µ —Å–∫–∏–¥–∫–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è:
```
–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: 59,994‚ÇΩ
- –°–∫–∏–¥–∫–∞ –∑–∞ —Å—Ä–æ–∫ (10%): -5,999‚ÇΩ
- –ü—Ä–æ–º–æ–∫–æ–¥ SALE20 (20%): -10,799‚ÇΩ
= –¶–µ–Ω–∞ –ø–æ—Å–ª–µ —Å–∫–∏–¥–æ–∫: 43,196‚ÇΩ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —à–∞–≥–æ–≤: -5,000üëü
= –ö –æ–ø–ª–∞—Ç–µ: 38,196‚ÇΩ

–ö–µ—à–±–µ–∫ 3%: 1,145 —à–∞–≥–æ–≤
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/dashboard/bonuses`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 250 —à–∞–≥–æ–≤
4. –í –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å"

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∫—É–ø–∫–∞ –∏ –∫–µ—à–±–µ–∫

1. –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É Basic 1 –º–µ—Å—è—Ü (3999‚ÇΩ)
2. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–æ–Ω—É—Å—ã
3. –î–æ–ª–∂–Ω–æ –Ω–∞—á–∏—Å–ª–∏—Ç—å—Å—è: 3999 √ó 3% = 119 —à–∞–≥–æ–≤
4. –ë–∞–ª–∞–Ω—Å: 250 + 119 = 369 —à–∞–≥–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A: –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/dashboard/bonuses`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B: –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –ø–æ —Å—Å—ã–ª–∫–µ
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å 250 —à–∞–≥–æ–≤
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –ø–æ–∫—É–ø–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –∑–∞ 3999‚ÇΩ
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –ø–æ–ª—É—á–∞–µ—Ç:
   - 500 —à–∞–≥–æ–≤ (–ø–µ—Ä–≤—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª)
   - 119 —à–∞–≥–æ–≤ (3% —Å –ø–æ–∫—É–ø–∫–∏)
   - –ò—Ç–æ–≥–æ: 619 —à–∞–≥–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–≥–æ–≤ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ

1. –ù–∞–∫–æ–ø–∏—Ç–µ –º–∏–Ω–∏–º—É–º 1000 —à–∞–≥–æ–≤
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏
3. –í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É (–¥–æ–ª–∂–Ω–∞ —É–º–µ–Ω—å—à–∏—Ç—å—Å—è)
5. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å (–¥–æ–ª–∂–µ–Ω —Å–ø–∏—Å–∞—Ç—å—Å—è)

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ü—Ä–æ–º–æ–∫–æ–¥—ã (–∞–¥–º–∏–Ω)

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/admin/promo-codes`
3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥: NEWYEAR, —Å–∫–∏–¥–∫–∞ 20%
4. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
5. –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏

## üì± –°—Ç—Ä–∞–Ω–∏—Ü—ã

- `/dashboard/bonuses` - –ë–æ–Ω—É—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/admin/promo-codes` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏ (–∞–¥–º–∏–Ω)
- `/admin/analytics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ–Ω—É—Å–æ–≤ (–∞–¥–º–∏–Ω)

## üîß API

### Actions

**–ë–æ–Ω—É—Å—ã:**
- `getUserBonusAccount(userId)` - –ø–æ–ª—É—á–∏—Ç—å —Å—á–µ—Ç
- `getBonusStats(userId)` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è UI
- `awardCashback(params)` - –Ω–∞—á–∏—Å–ª–∏—Ç—å –∫–µ—à–±–µ–∫
- `spendBonusesOnPayment(params)` - —Å–ø–∏—Å–∞—Ç—å —à–∞–≥–∏

**–†–µ—Ñ–µ—Ä–∞–ª—ã:**
- `getUserReferralCode(userId)` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥
- `getReferralLink(userId)` - –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É
- `registerReferral(code, newUserId)` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- `handleReferralPurchase(userId, amount)` - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–∫—É–ø–∫—É

**–ü—Ä–æ–º–æ–∫–æ–¥—ã:**
- `validatePromoCode(code, productId)` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
- `createPromoCode(data)` - —Å–æ–∑–¥–∞—Ç—å (–∞–¥–º–∏–Ω)
- `getPromoCodes()` - —Å–ø–∏—Å–æ–∫ (–∞–¥–º–∏–Ω)

### –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ü–µ–Ω

```typescript
import { calculateFinalPrice } from '@/lib/services/price-calculator'

const result = await calculateFinalPrice({
  productId: 'xxx',
  userId: 'yyy',
  promoCode: 'NEWYEAR',
  bonusToUse: 5000,
})

console.log(result.data.finalPrice) // –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
console.log(result.data.cashbackAmount) // –ö–µ—à–±–µ–∫
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ë–æ–Ω—É—Å—ã = —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞** - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Math.floor()`
2. **–ö–µ—à–±–µ–∫ –æ—Ç –æ–ø–ª–∞—á–µ–Ω–Ω–æ–π —Å—É–º–º—ã** - –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤, –Ω–æ –¥–æ —Å–ø–∏—Å–∞–Ω–∏—è –±–æ–Ω—É—Å–æ–≤
3. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã** - —Ç–∞–∫–∂–µ –æ—Ç –æ–ø–ª–∞—á–µ–Ω–Ω–æ–π —Å—É–º–º—ã
4. **Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –±–æ–Ω—É—Å—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ
5. **–¢—Ä–∏–≥–≥–µ—Ä—ã –ë–î** - –±–æ–Ω—É—Å–Ω—ã–π —Å—á–µ—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üêõ Troubleshooting

**–ë–æ–Ω—É—Å—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webhook: `/api/payments/webhook`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `payment_transactions.metadata` –µ—Å—Ç—å `actual_paid_amount`

**–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–¥ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ URL: `/auth/signup?ref=abc123`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ callback: `/auth/callback?ref=abc123`

**–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å –∫ –ø—Ä–æ–¥—É–∫—Ç—É

## üìù TODO (–¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π)

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∏ —à–∞–≥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∫—É –¥–ª—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- [ ] –†–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (WebSockets)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –±–æ–Ω—É—Å–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] –ë–æ–Ω—É—Å—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- [ ] –ë–æ–Ω—É—Å—ã –∑–∞ —Å–µ—Ä–∏–∏ (streak)

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã.

