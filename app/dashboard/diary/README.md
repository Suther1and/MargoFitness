# Дневник Здоровья - Документация

## 📋 Обзор

Страница дневника здоровья построена на современной архитектуре с акцентом на UX/UI и mobile-first подход.

## 🏗️ Архитектура

### Компоновка (Layout)

Страница использует **асимметричную grid-компоновку** с тремя основными зонами:

```
┌─────────────────────────────────────────────┐
│  Header + Week Navigator                    │
├──────────┬──────────────────┬───────────────┤
│  Zone 1  │     Zone 2       │    Zone 3     │
│ Metrics  │    Habits        │   Insights    │
│  (4 col) │    (5 col)       │   (3 col)     │
│          │                  │               │
└──────────┴──────────────────┴───────────────┘
```

**Mobile (вертикальный стек):**
```
┌─────────────────┐
│ Week Navigator  │
├─────────────────┤
│    Zone 2       │
│   (Habits)      │
├─────────────────┤
│    Zone 1       │
│   (Metrics)     │
├─────────────────┤
│    Zone 3       │
│  (Insights)     │
└─────────────────┘
```

## 📦 Компоненты

### Zone 1: Metrics Dashboard
**Файл:** `components/zone1-metrics.tsx`

Сетка карточек метрик (2x3):
- Вода (прогресс к цели)
- Сон (часы + качество)
- Вес (текущий вес)
- Шаги (прогресс к цели)
- Настроение (1-5)
- Энергия (1-10)

**Особенности:**
- Inline редактирование (клик → input)
- Прогресс-бары для метрик с целями
- Hover эффекты и ambient glow
- Адаптивная сетка (2 колонки на мобильных, 3 на десктопе)

### Zone 2: Habits List
**Файл:** `components/zone2-habits.tsx`

Список привычек с группировкой по времени суток:
- 🌅 Утренние
- ☀️ Дневные
- 🌙 Вечерние
- ⏰ В любое время

**Особенности:**
- Анимация отметки выполнения (confetti effect)
- Отображение стриков (🔥)
- Прогресс по категориям
- Кнопка добавления новой привычки

### Zone 3: Weekly Overview & Insights
**Файл:** `components/zone3-insights.tsx`

Три секции:
1. **Недельный график** - bar chart с трендом
2. **Достижения** - последние 3 достижения
3. **Статистика** - ключевые метрики (выполнено за месяц, лучший стрик, процент выполнения)

## 🎨 UI Компоненты

### MetricCard
**Файл:** `components/metric-card.tsx`

Универсальная карточка метрики с:
- Иконкой и цветовым акцентом
- Inline редактированием
- Опциональным прогресс-баром
- Hover эффектами

### HabitItem
**Файл:** `components/habit-item.tsx`

Интерактивный элемент привычки с:
- Анимированным чекбоксом
- Confetti эффектом при выполнении
- Отображением стрика
- Категорией и статусом

### WeekNavigator
**Файл:** `components/week-navigator.tsx`

Навигация по неделе с:
- Текущей датой
- 7 днями недели (кликабельные)
- Индикатором текущего дня
- Кнопкой календаря

## 🎭 Анимации

Используется **framer-motion** для:

1. **Появление элементов:**
   - Stagger animation (последовательное появление)
   - Fade + slide up

2. **Интерактивность:**
   - Scale на hover/tap
   - Smooth transitions
   - Confetti effect при выполнении привычки

3. **Прогресс-бары:**
   - Animated width
   - Smooth easing

## 📱 Адаптивность

### Breakpoints:
- **Mobile:** < 768px
- **Tablet:** 768px - 1024px
- **Desktop:** > 1024px

### Mobile-First подход:
1. Привычки в центре внимания (первые на странице)
2. Крупные touch targets (минимум 44px)
3. Вертикальный стек зон
4. Компактные карточки метрик (2 колонки)

## 🔌 Интеграция с Backend

### Типы данных
**Файл:** `types.ts`

```typescript
interface DailyMetrics {
  date: Date
  waterIntake: number
  waterGoal: number
  sleepHours: number
  sleepQuality: number
  weight: number
  mood: MoodRating | null
  energyLevel: number
  steps: number
  stepsGoal: number
  habits: DailyHabit[]
}
```

### Actions
**Файл:** `lib/actions/diary.ts`

- `getDiarySettings(userId)` - получить настройки
- `getDiaryEntries(userId, startDate, endDate)` - получить записи
- `upsertDiaryEntry(userId, date, metrics, notes)` - сохранить запись
- `updateStreaks(userId, entryDate)` - обновить стрики

## 🎯 Следующие шаги

1. **Интеграция с реальными данными:**
   - Подключить getDiaryEntries для загрузки данных
   - Реализовать upsertDiaryEntry при изменении метрик
   - Синхронизация с базой данных

2. **Управление привычками:**
   - Создать страницу/модал для добавления привычек
   - CRUD операции для привычек
   - Настройка частоты выполнения

3. **Расширенная аналитика:**
   - Графики за месяц/год
   - Корреляции между метриками
   - Экспорт данных

4. **Геймификация:**
   - Система достижений
   - Уровни и награды
   - Социальный рейтинг

## 🎨 Дизайн-система

### Цвета:
- **Primary:** Amber (#F59E0B)
- **Background:** Dark gradient (#18181b → #09090b)
- **Cards:** Glass-morphism (#121214/80 с backdrop-blur)
- **Borders:** White/5-10%

### Шрифты:
- **Headings:** Oswald (uppercase, bold)
- **Body:** Inter (regular, medium)

### Spacing:
- **Gap между зонами:** 24px (1.5rem)
- **Padding карточек:** 16-32px
- **Border radius:** 16-24px (rounded-2xl, rounded-3xl)

## 🐛 Известные ограничения

1. Пока используются mock данные (MOCK_DATA)
2. Нет реальной интеграции с базой данных
3. Календарь не реализован (только week navigator)
4. Управление привычками требует отдельной страницы

