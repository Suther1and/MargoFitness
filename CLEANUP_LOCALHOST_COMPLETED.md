# –û—Ç—á—ë—Ç –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ localhost –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
24 –¥–µ–∫–∞–±—Ä—è 2025

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### ‚úÖ –£–¥–∞–ª–µ–Ω—ã mock-–∏ –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –≤–∏–¥–∂–µ—Ç—ã

#### 1. **Mock –≤–∏–¥–∂–µ—Ç –æ–ø–ª–∞—Ç—ã** 
- –£–¥–∞–ª—ë–Ω —Ñ–∞–π–ª `app/payment/[productId]/mock-payment-widget.tsx` (255 —Å—Ç—Ä–æ–∫)
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞–Ω mock-—Ä–µ–∂–∏–º –æ–ø–ª–∞—Ç—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 2. **Mock —Ä–µ–∂–∏–º –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ –æ–ø–ª–∞—Ç—ã**
- –£–ø—Ä–æ—â—ë–Ω `app/payment/[productId]/payment-widget-switcher.tsx`
- –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "Mock (–¢–µ—Å—Ç)" –∏ –≤—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ `NODE_ENV === 'development'`
- –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ 2 —Ä–µ–∂–∏–º–∞: Embedded –∏ Redirect

### ‚úÖ –£–¥–∞–ª–µ–Ω—ã fallback –Ω–∞ localhost

#### 1. **Email —Å–µ—Ä–≤–∏—Å** (–ö–†–ò–¢–ò–ß–ù–û!)
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ fallback `|| 'http://localhost:3000'` –∏–∑ `lib/services/email.ts`
- –¢–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `NEXT_PUBLIC_APP_URL`
- –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ - –≤ production –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ localhost

**–ó–∞—Ç—Ä–æ–Ω—É—Ç–æ 4 email —à–∞–±–ª–æ–Ω–∞:**
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∞–ø–≥—Ä–µ–π–¥–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏

### ‚úÖ –£–¥–∞–ª–µ–Ω—ã development-only —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. **–¢–µ—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –≤ subscription-manager**
- –£–¥–∞–ª—ë–Ω –±–ª–æ–∫ —Å `process.env.NODE_ENV === 'development'` (70 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
- –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "[DEV] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É"
- –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "[DEV] –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"

### ‚úÖ –û—á–∏—â–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 1. **README.md**
- –£–¥–∞–ª–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `http://localhost:3000`
- –£–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª `docs/completed/PHASE_1_COMPLETE.md`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é

#### 2. **–£–¥–∞–ª–µ–Ω—ã –≥–∞–π–¥—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
- `docs/setup/QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è localhost
- `docs/setup/START_HERE.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ —Å localhost –ø—Ä–∏–º–µ—Ä–∞–º–∏
- `docs/setup/COMMANDS.md` - –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### 3. **–û–±–Ω–æ–≤–ª—ë–Ω SUPABASE_SETUP.md**
- –£–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ `/examples` —Å localhost

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-----------|-----------|
| **–£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤** | 4 —Ñ–∞–π–ª–∞ (mock-payment-widget.tsx + 3 –≥–∞–π–¥–∞) |
| **–£–¥–∞–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞** | 910 —Å—Ç—Ä–æ–∫ |
| **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ fallback** | 4 –º–µ—Å—Ç–∞ –≤ email —Å–µ—Ä–≤–∏—Å–µ |
| **–£–¥–∞–ª–µ–Ω–æ dev-–∫–Ω–æ–ø–æ–∫** | 2 —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ |
| **–û—á–∏—â–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** | 5 —Ñ–∞–π–ª–æ–≤ |

## ‚úÖ –ß—Ç–æ –æ—Å—Ç–∞–≤–ª–µ–Ω–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### `window.location.origin`
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞:
- `app/auth/page.tsx` - –¥–ª—è OAuth callback URL
- `components/oauth-buttons.tsx` - –¥–ª—è Google/Yandex OAuth
- `app/payment/[productId]/yookassa-widget.tsx` - –¥–ª—è return_url –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

**–≠—Ç–æ –ù–ï localhost!** –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ - `window.location.origin` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ù–∞ localhost –±—É–¥–µ—Ç `http://localhost:3000`
- –ù–∞ production –±—É–¥–µ—Ç –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
- –ú–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ - —Ç–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å!

## ‚ö†Ô∏è –í–ê–ñ–ù–û! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```env
NEXT_PUBLIC_APP_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
NEXT_PUBLIC_SITE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
```

–ë–µ–∑ –Ω–∏—Ö:
- ‚ùå Email –ø–∏—Å—å–º–∞ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–Ω–µ—Ç —Å—Å—ã–ª–æ–∫)
- ‚úÖ OAuth –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è window.location.origin)
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

## üéØ –ò—Ç–æ–≥–∏

‚úÖ **–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ production**  
‚úÖ **–ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç localhost**  
‚úÖ **–ù–µ—Ç mock-—Ä–µ–∂–∏–º–æ–≤**  
‚úÖ **–ù–µ—Ç development-only –∫–æ–¥–∞ –≤ UI**  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ production**  

---

**Commit:** 28a71a6  
**–ò–∑–º–µ–Ω–µ–Ω–æ:** 9 —Ñ–∞–π–ª–æ–≤  
**–£–¥–∞–ª–µ–Ω–æ:** 910 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é üöÄ

