# üöÄ –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é MargoFitness –Ω–∞ Vercel

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ `database/migrations/` (001-019)
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**–î–ª—è –±–æ–Ω—É—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `database/migrations/013_ADD_BONUS_REFERRAL_SYSTEM.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—ã: `user_bonuses`, `bonus_transactions`, `referral_codes`, `referrals`, `promo_codes`

### 2. OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### Yandex ID:
1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ [OAuth.Yandex](https://oauth.yandex.ru/)
2. –î–æ–±–∞–≤—å—Ç–µ Redirect URI: `https://your-domain.com/api/auth/yandex/callback`
3. –í—ã–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞: `login:email`, `login:info`, `login:avatar`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret

#### Telegram Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Bot Token
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ Bot Name

#### Google OAuth:
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ Supabase Dashboard (Authentication ‚Üí Providers ‚Üí Google)

### 3. –Æ–ö–∞—Å—Å–∞ (–ø–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [yookassa.ru](https://yookassa.ru/)
2. –ü–æ–ª—É—á–∏—Ç–µ Shop ID –∏ Secret Key
3. –î–ª—è production: –∑–∞–∫–ª—é—á–∏—Ç–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö

---

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ –≤ Vercel

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [vercel.com/new](https://vercel.com/new)
2. –ù–∞–∂–º–∏—Ç–µ **"Import Project"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **GitHub** (–∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä)
4. –ù–∞–π–¥–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **MargoFitness**
5. –ù–∞–∂–º–∏—Ç–µ **"Import"**

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ (**Settings ‚Üí Environment Variables**) –¥–æ–±–∞–≤—å—Ç–µ:

#### üî¥ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

**Supabase:**
```env
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

**Site URL:**
```env
NEXT_PUBLIC_SITE_URL=https://your-domain.com
```

#### üü° OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:

**Yandex ID:**
```env
YANDEX_CLIENT_ID=your_client_id
YANDEX_CLIENT_SECRET=your_client_secret
```

**Telegram Auth:**
```env
TELEGRAM_BOT_TOKEN=your_bot_token
NEXT_PUBLIC_TELEGRAM_BOT_NAME=your_bot_name
```

#### üü¢ –Æ–ö–∞—Å—Å–∞ (–ø–ª–∞—Ç–µ–∂–∏):

```env
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
YOOKASSA_WEBHOOK_SECRET=your_webhook_secret
NEXT_PUBLIC_YOOKASSA_RETURN_URL=https://your-domain.com/dashboard?payment=success
```

#### üîµ Cron Job:

```env
CRON_SECRET=your_random_secret_key
```

#### üü£ Email (Resend):

```env
RESEND_API_KEY=your_resend_api_key
EMAIL_FROM=MargoFitness <onboarding@resend.dev>
```

**–í–∞–∂–Ω–æ:** –î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—ã–±–µ—Ä–∏—Ç–µ environment: **Production, Preview, Development**

### –®–∞–≥ 3: Deploy

1. –ù–∞–∂–º–∏—Ç–µ **"Deploy"**
2. –ñ–¥–∏—Ç–µ ~2-3 –º–∏–Ω—É—Ç—ã
3. –ü–æ–ª—É—á–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL –≤–∏–¥–∞ `margofitness.vercel.app`

### –®–∞–≥ 4: –ü—Ä–∏–≤—è–∂–∏—Ç–µ –¥–æ–º–µ–Ω

1. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π—Ç–µ **Settings ‚Üí Domains**
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω: `your-domain.com`
3. Vercel –¥–∞—Å—Ç DNS –∑–∞–ø–∏—Å–∏:
   - **–¢–∏–ø:** A –∏–ª–∏ CNAME
   - **–ó–Ω–∞—á–µ–Ω–∏–µ:** vercel-dns.com (–∏–ª–∏ IP)

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS

–ó–∞–π–¥–∏—Ç–µ –∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–æ–º–µ–Ω–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å–∏ –æ—Ç Vercel:

```
–¢–∏–ø: A
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: 76.76.21.21 (–ø—Ä–∏–º–µ—Ä –æ—Ç Vercel)
```

**–ñ–¥–∏—Ç–µ:** DNS –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è 5-30 –º–∏–Ω—É—Ç

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –Æ–ö–∞—Å—Å—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ [–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Æ–ö–∞—Å—Å–∞](https://yookassa.ru/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Webhooks)**
3. –ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**

**URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
```
https://your-domain.com/api/payments/webhook
```

**–°–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
- ‚úÖ `payment.succeeded` - –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
- ‚úÖ `payment.canceled` - –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ `refund.succeeded` - –£—Å–ø–µ—à–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –°–µ–∫—Ä–µ—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏** –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ Vercel –∫–∞–∫ `YOOKASSA_WEBHOOK_SECRET`
5. –ù–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cron Job

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç cron job –∏–∑ `vercel.json`.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `vercel.json` —Å–æ–¥–µ—Ä–∂–∏—Ç:

```json
{
  "crons": [
    {
      "path": "/api/cron/renew-subscriptions",
      "schedule": "0 2 * * *"
    }
  ]
}
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 02:00 UTC.

### 3. –û–±–Ω–æ–≤–∏—Ç–µ OAuth Redirect URIs

#### Yandex:
1. –û—Ç–∫—Ä–æ–π—Ç–µ [OAuth.Yandex](https://oauth.yandex.ru/)
2. –í Redirect URI –¥–æ–±–∞–≤—å—Ç–µ: `https://your-domain.com/api/auth/yandex/callback`

#### Supabase (–¥–ª—è –≤—Å–µ—Ö OAuth):
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. Authentication ‚Üí URL Configuration
3. Site URL: `https://your-domain.com`
4. Redirect URLs: `https://your-domain.com/auth/callback`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è  
‚úÖ Email/Password –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ Google OAuth —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ Yandex OAuth —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ Dashboard –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è  
‚úÖ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è  

### –ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å:**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/dashboard/bonuses`
   - –ë–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 250 —à–∞–≥–æ–≤

2. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
   - –ë–∞–ª–∞–Ω—Å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 500 —à–∞–≥–æ–≤ (250 welcome + 250 referral)

3. **–ü–æ–∫—É–ø–∫–∞ –∏ –∫–µ—à–±–µ–∫:**
   - –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É Basic (3999‚ÇΩ)
   - –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–æ–Ω—É—Å—ã
   - –ö–µ—à–±–µ–∫ 3% = 119 —à–∞–≥–æ–≤

### –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:

1. **–¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂:**
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
   - –ó–∞–≤–µ—Ä—à–∏—Ç–µ –æ–ø–ª–∞—Ç—É
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –ø–æ–¥–ø–∏—Å–∫–∏ –≤ Dashboard

2. **Webhook:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel (Functions ‚Üí Logs)
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ webhook –æ—Ç –Æ–ö–∞—Å—Å—ã

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "OAuth not configured"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel  
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ **Production**  
‚Üí Redeploy –ø—Ä–æ–µ–∫—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –û—à–∏–±–∫–∞: "Invalid redirect_uri"
‚Üí –û–±–Ω–æ–≤–∏—Ç–µ Redirect URI –≤ OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö  
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `NEXT_PUBLIC_SITE_URL` (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –¥–æ–º–µ–Ω–æ–º)

### –û—à–∏–±–∫–∞: "Database error"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ Supabase  
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏

### –ë–æ–Ω—É—Å—ã –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webhook: `/api/payments/webhook`  
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä `on_profile_created_create_bonus` —Å–æ–∑–¥–∞–Ω  
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `payment_transactions.metadata` –µ—Å—Ç—å `actual_paid_amount`

### DNS –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø–∏—Å–∏ —É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Vercel)  
‚Üí –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 48 —á–∞—Å–æ–≤ (–æ–±—ã—á–Ω–æ 5-30 –º–∏–Ω—É—Ç)  
‚Üí –û—á–∏—Å—Ç–∏—Ç–µ DNS –∫–µ—à: `ipconfig /flushdns` (Windows) –∏–ª–∏ `sudo dscacheutil -flushcache` (Mac)

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `https://your-domain.com/api/payments/webhook`  
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `YOOKASSA_WEBHOOK_SECRET` –≤ Vercel  
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Functions

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Vercel Dashboard:
- **Analytics** - –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **Functions ‚Üí Logs** - –ª–æ–≥–∏ API endpoints
- **Cron Jobs** - —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

### Supabase Dashboard:
- **Table Editor** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **Database ‚Üí Logs** - –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Auth** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ –¥–µ–Ω—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –±–æ–Ω—É—Å–∞–º–∏:**
```sql
SELECT COUNT(*) FROM user_bonuses;
```

**–û–±—â–∏–π –±–∞–ª–∞–Ω—Å –≤ —Å–∏—Å—Ç–µ–º–µ:**
```sql
SELECT SUM(balance) as total_balance FROM user_bonuses;
```

**–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
```sql
SELECT 
  COUNT(*) as total_referrals,
  COUNT(*) FILTER (WHERE status = 'first_purchase_made') as active
FROM referrals;
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞](guides/BONUS_SYSTEM.md)
- [–ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞](guides/PAYMENT_SYSTEM.md)
- [–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞](guides/REFERRAL_SYSTEM.md)
- [–†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏](guides/YOOKASSA_PAYMENTS.md)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ MargoFitness –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 31 –¥–µ–∫–∞–±—Ä—è 2025

