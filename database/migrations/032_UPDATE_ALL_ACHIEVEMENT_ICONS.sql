-- ============================================
-- –ú–∏–≥—Ä–∞—Ü–∏—è 032: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ icon_url –¥–ª—è –≤—Å–µ—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
-- ============================================
-- –≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç icon_url –¥–ª—è –≤—Å–µ—Ö 36 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
-- –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ 3D glass –∏–∫–æ–Ω–∫–∞–º–∏
-- ============================================

-- ============================================
-- üî• –°–ï–†–ò–ò (Streaks)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/first-step.png' 
WHERE title = '–ü–µ—Ä–≤—ã–π —à–∞–≥';

UPDATE achievements 
SET icon_url = '/achievements/week-strength.png' 
WHERE title = '–ù–µ–¥–µ–ª—è —Å–∏–ª—ã';

UPDATE achievements 
SET icon_url = '/achievements/two-weeks.png' 
WHERE title = '–î–≤–µ –Ω–µ–¥–µ–ª–∏';

UPDATE achievements 
SET icon_url = '/achievements/month-discipline.png' 
WHERE title = '–ú–µ—Å—è—Ü –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã';

UPDATE achievements 
SET icon_url = '/achievements/iron-will.png' 
WHERE title = '–ñ–µ–ª–µ–∑–Ω–∞—è –≤–æ–ª—è';

-- ============================================
-- üíß –í–û–î–ê (Metrics - Water)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/water-lover.png' 
WHERE title = '–í–æ–¥–æ—Ö–ª—ë–±';

UPDATE achievements 
SET icon_url = '/achievements/ocean.png' 
WHERE title = '–û–∫–µ–∞–Ω';

-- ============================================
-- üèÉ –®–ê–ì–ò (Metrics - Steps)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/marathon.png' 
WHERE title = '–ú–∞—Ä–∞—Ñ–æ–Ω–µ—Ü';

UPDATE achievements 
SET icon_url = '/achievements/ultra-marathon.png' 
WHERE title = '–£–ª—å—Ç—Ä–∞–º–∞—Ä–∞—Ñ–æ–Ω';

UPDATE achievements 
SET icon_url = '/achievements/giga-steps.png' 
WHERE title = '–ì–∏–≥–∞—à–∞–≥–∏';

-- ============================================
-- üò¥ –°–û–ù (Metrics - Sleep)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/sleep-king.png' 
WHERE title = '–°–æ–Ω–Ω—ã–π –∫–æ—Ä–æ–ª—å';

UPDATE achievements 
SET icon_url = '/achievements/sleep-week.png' 
WHERE title = '–ù–µ–¥–µ–ª—è —Å–Ω–∞';

-- ============================================
-- ‚ú® –ü–†–ò–í–´–ß–ö–ò (Habits)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/habit-start.png' 
WHERE title = '–ù–∞—á–∞–ª–æ –ø—É—Ç–∏';

UPDATE achievements 
SET icon_url = '/achievements/habit-routine.png' 
WHERE title = '–ü—Ä–∏–≤—ã—á–Ω—ã–π —Ä–µ–∂–∏–º';

UPDATE achievements 
SET icon_url = '/achievements/life-master.png' 
WHERE title = '–•–æ–∑—è–∏–Ω —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏';

UPDATE achievements 
SET icon_url = '/achievements/collector.png' 
WHERE title = '–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä';

UPDATE achievements 
SET icon_url = '/achievements/hundred-percent.png' 
WHERE title = '–°—Ç–æ–ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∏–∫';

-- ============================================
-- ‚öñÔ∏è –í–ï–° (Weight)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/first-mark.png' 
WHERE title = '–ü–µ—Ä–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞';

UPDATE achievements 
SET icon_url = '/achievements/weight-control.png' 
WHERE title = '–ö–æ–Ω—Ç—Ä–æ–ª—å';

UPDATE achievements 
SET icon_url = '/achievements/month-control.png' 
WHERE title = '–ú–µ—Å—è—Ü –∫–æ–Ω—Ç—Ä–æ–ª—è';

UPDATE achievements 
SET icon_url = '/achievements/goal-reached.png' 
WHERE title = '–¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!';

UPDATE achievements 
SET icon_url = '/achievements/stability.png' 
WHERE title = '–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å';

-- ============================================
-- üìÖ –†–ï–ì–£–õ–Ø–†–ù–û–°–¢–¨ (Consistency)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/consistency.png' 
WHERE title = '–ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ';

UPDATE achievements 
SET icon_url = '/achievements/perfect-month.png' 
WHERE title = '–ò–¥–µ–∞–ª—å–Ω—ã–π –º–µ—Å—è—Ü';

UPDATE achievements 
SET icon_url = '/achievements/veteran.png' 
WHERE title = '–í–µ—Ç–µ—Ä–∞–Ω';

UPDATE achievements 
SET icon_url = '/achievements/legend.png' 
WHERE title = '–õ–µ–≥–µ–Ω–¥–∞';

-- ============================================
-- üèãÔ∏è –¢–†–ï–ù–ò–†–û–í–ö–ò (Workouts)
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/first-workout.png' 
WHERE title = '–ü–µ—Ä–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞';

UPDATE achievements 
SET icon_url = '/achievements/weekly-cycle.png' 
WHERE title = '–ù–µ–¥–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª';

UPDATE achievements 
SET icon_url = '/achievements/athlete.png' 
WHERE title = '–ê—Ç–ª–µ—Ç';

UPDATE achievements 
SET icon_url = '/achievements/sport-master.png' 
WHERE title = '–ú–∞—Å—Ç–µ—Ä —Å–ø–æ—Ä—Ç–∞';

-- ============================================
-- üéØ –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï/–°–ï–ö–†–ï–¢–ù–´–ï
-- ============================================
UPDATE achievements 
SET icon_url = '/achievements/night-owl.png' 
WHERE title = '–ù–æ—á–Ω–∞—è —Å–æ–≤–∞';

UPDATE achievements 
SET icon_url = '/achievements/perfect-day.png' 
WHERE title = '–ò–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å';

UPDATE achievements 
SET icon_url = '/achievements/perfectionist.png' 
WHERE title = '–ü–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç';

UPDATE achievements 
SET icon_url = '/achievements/hydrator.png' 
WHERE title = '–ì–∏–¥—Ä–∞—Ç–æ—Ä';

UPDATE achievements 
SET icon_url = '/achievements/energetic.png' 
WHERE title = '–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫';

UPDATE achievements 
SET icon_url = '/achievements/joy-life.png' 
WHERE title = '–†–∞–¥–æ—Å—Ç—å –∂–∏–∑–Ω–∏';

-- ============================================
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
-- ============================================
DO $$
DECLARE
  total_achievements INT;
  with_icons INT;
  without_icons INT;
  rec RECORD;
BEGIN
  SELECT COUNT(*) INTO total_achievements FROM achievements;
  SELECT COUNT(*) INTO with_icons FROM achievements WHERE icon_url IS NOT NULL;
  SELECT COUNT(*) INTO without_icons FROM achievements WHERE icon_url IS NULL;
  
  RAISE NOTICE '============================================';
  RAISE NOTICE '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∫–æ–Ω–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:';
  RAISE NOTICE '============================================';
  RAISE NOTICE '–í—Å–µ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π: %', total_achievements;
  RAISE NOTICE '–° –∏–∫–æ–Ω–∫–∞–º–∏: %', with_icons;
  RAISE NOTICE '–ë–µ–∑ –∏–∫–æ–Ω–æ–∫: %', without_icons;
  RAISE NOTICE '============================================';
  
  IF without_icons > 0 THEN
    RAISE NOTICE '–í–ù–ò–ú–ê–ù–ò–ï: –ï—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±–µ–∑ –∏–∫–æ–Ω–æ–∫!';
    RAISE NOTICE '–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –±–µ–∑ icon_url:';
    FOR rec IN (SELECT title FROM achievements WHERE icon_url IS NULL ORDER BY title)
    LOOP
      RAISE NOTICE '  - %', rec.title;
    END LOOP;
  ELSE
    RAISE NOTICE '–£—Å–ø–µ—à–Ω–æ! –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –∏–∫–æ–Ω–∫–∏.';
  END IF;
  
  RAISE NOTICE '============================================';
END $$;
